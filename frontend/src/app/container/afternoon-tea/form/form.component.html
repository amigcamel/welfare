<div class="container" #container fxLayout="column">
  <div fxLayout="column" fxLayoutAlign="center end" class="expiration">
    <div fxLayout="row" fxLayoutAlign="space-around center">

    </div>
  </div>
  <div>
    <div class="form" fxLayout="column">
      <div class="form-label" fxLayout="row">
        <div fxLayout="row" fxLayoutAlign="start center">
          <div class="form-label-text">
            {{formData.form[currentForm].formLabel}}
          </div>
          <div class="menu" (click)="seeMenu(formData.form[currentForm].menuImage)">Menu</div>
        </div>
        <div class="count-down-item">Due Date: {{formData.expiration}}</div>
      </div>
      <div class="filter-bar" fxLayout="row" fxLayoutAlign="starter center">
        <input placeholder="Search item" type="text" fxFlex [(ngModel)]="filterTarget">
        <mat-icon>search</mat-icon>
      </div>
      <div *ngFor="let item of formData.form[currentForm].items">
        <ng-container *ngIf="filterText(item.itemLabel)">
          <div fxLayout="column" class="item" [ngClass]="{'active': item.value > 0}" [@openClose]="item.collapse ? 'open' : 'closed'">
            <div>
              <div class="item-title" fxLayout="row" (click)="toggleCollapse(item)">
                <div class="item-label" fxLayout="rows" fxLayoutAlign.gt-sm="space-between space-between" fxLayoutAlign.xs="space-between center">
                  <span class="item-title-label">{{item.itemLabel}}</span>
                  <span class="item-price-label">
                    {{getPriceLabel(item)}}
                  </span>
                </div>

                <div class="control-bar" fxLayout="row" fxLayoutAlign="space-around center">
                  <mat-icon class="button" (click)="subOnFlow(formData.form[currentForm], item, $event);" style="width: 32px; height: 32px">remove</mat-icon>
                  <div class="item-value">{{item.value}}</div>
                  <mat-icon class="button" (click)="addOneFlow(formData.form[currentForm], item, $event);" style="width: 32px; height: 32px">add</mat-icon>
                </div>
              </div>
              <ng-container *ngFor="let option of item.options">
                <ng-container *ngIf="!!option.radioSelections && option.radioSelections.length > 0">
                  <ng-container *ngIf="layoutConfigService.isDesktop$ | async; else mobile">
                    <div class="option" fxLayout="column" fxLayoutAlign="start start">
                      <div class="option-title">{{option.optionLabel}}:</div>
                      <mat-radio-group [(ngModel)]="item.selections[option.optionKey]" (change)="calculatorSum()" fxLayoutAlign="space-between center" fxFlex="100">
                        <mat-radio-button  *ngFor="let select of option.radioSelections" [value]="select.value" >{{select.selectionLabel}}</mat-radio-button>
                      </mat-radio-group>
                    </div>
                  </ng-container>
                  <ng-template #mobile>
                    <div class="option" fxLayout="row" fxLayoutAlign="start center">
                      <div class="option-title">{{option.optionLabel}}:</div>
                      <mat-select
                        [(ngModel)]="item.selections[option.optionKey]" (selectionChange)="calculatorSum()">
                        <mat-option *ngFor="let select of option.radioSelections" [value]="select.value">
                          {{select.selectionLabel}}
                        </mat-option>
                      </mat-select>
                    </div>
                  </ng-template>
                </ng-container>
                <ng-container *ngIf="!!option.checkBoxOptions && option.checkBoxOptions.length > 0">
                  <div class="option" fxLayout="column" fxLayoutAlign="start start">
                    <div class="option-title">{{option.optionLabel}}:</div>
                    <div class="selection">
                      <div *ngFor="let select of option.checkBoxOptions" fxLayout="column" fxLayoutAlign="space-between center" fxFlex="100">
                        <mat-checkbox [checked]="select.choose" (change)="checkedOption(select)">{{select.selectionLabel}}</mat-checkbox>
                      </div>
                    </div>

                  </div>
                </ng-container>
              </ng-container>
            </div>
          </div>
        </ng-container>
      </div>
      <ng-container *ngIf="true">
        <div fxLayout="row" fxFlex="100" fxLayoutAlign="center center">
          <button class="page-btn"  (click)="previousPage()">Previous</button>
          <button class="finish-btn" *ngIf="!formData.form[currentForm].isEnd" (click)="nextPage()">Next</button>
          <button class="finish-btn"  *ngIf="formData.form[currentForm].isEnd" type="button" color="accent" (click)="finishOrder()">
            Finish
          </button>
        </div>
      </ng-container>
    </div>
  </div>
</div>
