<div class="container" fxLayout="column">
  <div class="title-group" fxLayout="row" fxLayoutAlign="space-between center">
    <div fxLayout="column" fxLayoutAlign="center start">
      <div fxLayout="row" fxLayoutAlign="start center">
        <mat-icon>home</mat-icon>
        <mat-icon>chevron_right</mat-icon>
        <span>Afternoon tea</span>
      </div>
      <div>SLEEP 5 MIN</div>
    </div>
    <div *ngIf="!!expiration" fxLayout="column" fxLayoutAlign="center start" fxFlex="40">
      <div class="count-down-item">Expiration: </div>
      <div fxLayout="row" fxLayoutAlign="space-around center">
        <div class="count-down-item">{{this.expiration.days}} Days </div>
        <div class="count-down-item">{{this.expiration.hours}} Hours </div>
        <div class="count-down-item">{{this.expiration.minutes}} Minutes </div>
        <div class="count-down-item">{{this.expiration.seconds}} Seconds</div>
      </div>
    </div>
  </div>
  <div>
    <p *ngIf="!!formData?.update_time">
      Last edited: {{formData['update_time']}}
    </p>
    <div class="vertical-stepper-wrapper" fxLayout="column">
      <mat-vertical-stepper [linear]="true">
        <mat-step *ngFor="let form of formData?.form; let i = index">
          <ng-template matStepLabel>
            <div fxLayout="row" fxLayoutAlign="start center">
              <h1>
                {{form.formLabel}}
              </h1>
              <mat-icon (click)="seeMenu(form.menuImage)" style="width: 24px !important; height: 24px !important;">search</mat-icon>
            </div>
          </ng-template>
          <div class="filter-bar" fxLayout="row" fxLayoutAlign="starter center">
            <input placeholder="Search item" type="text" fxFlex [(ngModel)]="filterTarget">
            <mat-icon>search</mat-icon>
          </div>
          <div *ngFor="let item of form.items">
            <ng-container *ngIf="filterText(item.itemLabel)">
              <div fxLayout="column" class="order-item" [@openClose]="item.collapse ? 'open' : 'closed'">
                <div class="title" fxLayout="row" fxLayoutAlign="space-between center" (click)="item.collapse = true;">
                  <h2>{{item.itemLabel}}</h2>
                  <div class="title-option" fxLayout="row" fxLayoutAlign="space-around center" fxFlex="50">
                    <mat-icon class="button" (click)="subOne(i, item.itemKey);"style="width: 32px; height: 32px">remove</mat-icon>
                    <input matInput [(ngModel)]="item.value" disabled type="number" style="text-align: center;">
                    <mat-icon class="button" (click)="addOne(i, item.itemKey); "style="width: 32px; height: 32px">add</mat-icon>
                  </div>
                </div>
                <ng-container *ngFor="let option of item.options">
                  <ng-container *ngIf="!!option.radioSelections && option.radioSelections.length > 0">
                    <div fxLayout="row" fxLayoutAlign="start center">
                      <div class="option-title">{{option.optionLabel}}:</div>
                      <mat-radio-group fxLayoutAlign="space-between center" [(ngModel)]="item.selections[option.optionKey]" (change)="calculatorSum()" fxFlex="100">
                        <mat-radio-button  *ngFor="let select of option.radioSelections" [value]="select.value" >{{select.selectionLabel}}</mat-radio-button>
                      </mat-radio-group>
                    </div>
                  </ng-container>
                  <ng-container *ngIf="!!option.checkBoxOptions && option.checkBoxOptions.length > 0">
                    <div fxLayout="row" fxLayoutAlign="start center">
                      <div class="option-title">{{option.optionLabel}}</div>
                      <div *ngFor="let select of option.checkBoxOptions" fxLayoutAlign="space-between center" fxFlex="100">
                        <mat-checkbox [checked]="select.choose" (change)="checkedOption(i,item.itemKey, option.optionKey, select.selectionKey )">{{select.selectionLabel}}</mat-checkbox>
                      </div>
                    </div>
                  </ng-container>
                </ng-container>
              </div>
            </ng-container>
          </div>
          <div fxLayout="row" fxFlex="100" fxLayoutAlign="space-around center">
            <button mat-raised-button matStepperPrevious (click)="closeAllExpand()">previous</button>
            <button *ngIf="!form.isEnd" mat-raised-button matStepperNext (click)="closeAllExpand()">next</button>
            <button *ngIf="form.isEnd" mat-raised-button type="button" color="accent" (click)="finishHorizontalStepper()">
              Finish
            </button>
          </div>
          <div fxFlex="100" fxLayout="row" fxLayoutAlign="space-between center">
            <div></div>
            <div fxLayout="row">
              <mat-icon>attach_money</mat-icon>
              <div>Total: {{sum}}</div>
            </div>
          </div>
        </mat-step>
      </mat-vertical-stepper>
    </div>
  </div>
</div>
